<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Neon: Controles Pro</title>
    <link rel="stylesheet" href="https://pyscript.net/releases/2023.05.1/pyscript.css" />
    <script defer src="https://pyscript.net/releases/2023.05.1/pyscript.js"></script>
    <style>
        body { 
            background: radial-gradient(circle, #1a1a2e 0%, #16213e 100%); 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            min-height: 100vh; margin: 0; color: #00d4ff; font-family: sans-serif; 
        }
        canvas { 
            border: 4px solid #00d4ff; background-color: #0f3460; 
            box-shadow: 0 0 25px rgba(0, 212, 255, 0.4); border-radius: 15px;
            max-width: 90vw; 
        }
        .menu-velocidade { margin-bottom: 15px; display: flex; gap: 10px; }
        .btn-niveis {
            padding: 8px 15px; border: 2px solid #e94560; background: transparent;
            color: white; cursor: pointer; border-radius: 5px; font-weight: bold;
        }
        .btn-niveis.ativo { background: #e94560; }

        /* Estilo da Cruz de Comandos */
        .controles-container { 
            margin-top: 30px; 
            display: grid; 
            grid-template-columns: repeat(3, 70px); 
            grid-template-rows: repeat(3, 70px); 
            grid-gap: 10px; 
        }
        .btn-control { 
            width: 70px; height: 70px; background: #333; border: 2px solid #00d4ff; 
            border-radius: 15px; color: white; font-size: 30px; cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px #005a70; transition: 0.1s;
        }
        .btn-control:active { box-shadow: 0 0; transform: translateY(4px); background: #00d4ff; }
        
        /* Posicionamento na Grid */
        .up { grid-column: 2; grid-row: 1; }
        .left { grid-column: 1; grid-row: 2; }
        .right { grid-column: 3; grid-row: 2; }
        .down { grid-column: 2; grid-row: 3; }

        .btn-reset { margin-top: 25px; padding: 12px 25px; background: #e94560; border: none; color: white; border-radius: 5px; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>
    <h1>PONTOS: <span id="score">0</span></h1>
    
    <div class="menu-velocidade">
        <button id="btn-iniciante" class="btn-niveis" py-click="definir_nivel('iniciante')">Iniciante</button>
        <button id="btn-avancado" class="btn-niveis" py-click="definir_nivel('avancado')">Avançado</button>
    </div>

    <canvas id="snakeGame" width="400" height="400"></canvas>
    
    <div class="controles-container">
        <button class="btn-control up" py-click="mudar_direcao_btn('up')">↑</button>
        <button class="btn-control left" py-click="mudar_direcao_btn('left')">←</button>
        <button class="btn-control right" py-click="mudar_direcao_btn('right')">→</button>
        <button class="btn-control down" py-click="mudar_direcao_btn('down')">↓</button>
    </div>

    <button class="btn-reset" py-click="reiniciar()">Reiniciar</button>

    <py-script>
import random
import asyncio
from pyscript import Element
from js import window, alert, document

canvas = Element("snakeGame").element
ctx = canvas.getContext("2d")
tamanho = 20
cobra = [[100, 100], [80, 100], [60, 100]]
direcao = [tamanho, 0]
comida = [200, 200]
score = 0
jogo_rodando = True
velocidade =